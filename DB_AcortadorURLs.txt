-- Crear la base de datos para el acortador de URLs
CREATE DATABASE IF NOT EXISTS acortador_urls;

-- Seleccionar la base de datos recién creada
USE acortador_urls;

-- Tabla de Suscripciones
CREATE TABLE IF NOT EXISTS Suscripciones (
    id_suscripcion INT AUTO_INCREMENT PRIMARY KEY,
    tipo_suscripcion ENUM('FREE', 'VIP', 'PRO') NOT NULL,
    fecha_inicio TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    fecha_fin TIMESTAMP DEFAULT CURRENT_TIMESTAMPurls
);

-- Tabla de Usuarios
CREATE TABLE IF NOT EXISTS Usuarios (
    id_usuario INT AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(100) NOT NULL,
    correo VARCHAR(100) NOT NULL UNIQUE,
    contraseña VARCHAR(255) NOT NULL,
    fecha_registro TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    id_suscripcion INT,
    FOREIGN KEY (id_suscripcion) REFERENCES Suscripciones(id_suscripcion)
);

-- Tabla de URLs
CREATE TABLE IF NOT EXISTS URLs (
    id_url INT AUTO_INCREMENT PRIMARY KEY,
    url_original TEXT NOT NULL,
    url_acortada VARCHAR(100) NOT NULL,
    fecha_creacion TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    estado_validez TIMESTAMP DEFAULT CURRENT_TIMESTAMP, 
    id_usuario INT,
    FOREIGN KEY (id_usuario) REFERENCES Usuarios(id_usuario)
);

-- Tabla de Configuración de la Aplicación
CREATE TABLE IF NOT EXISTS Configuracion (
    id_configuracion INT AUTO_INCREMENT PRIMARY KEY,
    nombre_configuracion VARCHAR(100) NOT NULL,
    valor_configuracion TEXT
);

INSERT INTO `suscripciones` (`id_suscripcion`, `tipo_suscripcion`, `fecha_inicio`, `fecha_fin`) VALUES
	(1, 'FREE', '2024-07-11 22:42:23', '2024-07-11 22:42:23'),
	(2, 'VIP', '2024-07-11 22:42:30', '2024-07-11 22:42:30'),
	(3, 'PRO', '2024-07-11 22:42:35', '2024-07-11 22:42:35');
